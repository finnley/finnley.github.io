+++
title = '变量、常量'
date = 2025-11-16T08:46:42+08:00
draft = true
categories = [ "Go" ]
tags = [ "go"]
+++

# 单声明变量

- 使用 `var` 关键字
- 格式：

```go
var 变量名称 类型 = 表达式
例：
var name string = "Tom"
```

此格式为 `声明单变量` 语法。可置于 `函数`或`包`内，包内就是看上去像全局变量，但是其实并非全局变量；


1. **第一种**，指定变量类型，声明后若不赋值，怎使用默认零值，比如字符串类型是空字符串，数值类型是0，布尔类型是false等。

```go
var i int = 10
var name string
name ="golang"

var version string
var age int
fmt.Println(version) // ""
fmt.Println(age) 	 // 0
```

2. **第二种**，根据值自行判定变量类型(类型推断Type inference)，让编译器自动决定类型。

如果一个变量有一个初始值，Go将自动能够根据初始值来推断该变量的类型。因此，如果变量具有初始值，则可以省略变量声明中的类型。

```go
var name = "golang"
```

3. **第三种**，省略var，简短声明, 注意 `:=` 左侧的变量不应该是已经声明过的(多个变量同时声明时，至少保证一个是新变量)，否则会导致编译错误。

```go
var a int = 10
var b = 10
c : = 10
```

这种方式`只能被用在函数体内，不可以用于全局变量的声明与赋值`。

```go
package main

var a = "golang"
var b string = "python"
var c bool

func main(){
    println(a, b, c)
}
```

# 多变量声明

1. **第一种**，以逗号分隔，声明与赋值分开，若不赋值，存在默认值

```go
var name1, name2, name3 type
name1, name2, name3 = v1, v2, v3

var a, b, c bool
var s1, s2 string = "hello", "world"
```

2. **第二种**，直接赋值，下面的变量类型可以是不同的类型。

```go
var name1, name2, name3 = v1, v2, v3
var a, b, c = 1, false, "str" //多重赋值

var a, b, i, s1, s2 = true, false, 3, "hello", "world"
```


3. **第三种**，集合类型

```go
var (
    name string
    age int
)
```

另外不管是函数内，还是包内都可以使用 `var ()` 定义一组变量。

**注意**：

- 变量必须先定义才能使用
- go语言是静态语言，要求变量的类型和赋值的类型必须一致。
- 变量名不能冲突。(同一个作用于域内不能冲突)
- 简短定义方式，左边的变量名至少有一个是新的
- 简短定义方式，不能定义全局变量。
- 变量的零值。也叫默认值。
- 变量定义了就要使用，否则无法通过编译。

如果在相同的代码块中，我们不可以再次对相同名称的变量使用初始化声明，例如：a := 20 就是不被允许的，编译器会提示错误 no new  variables on left side of :=，但是 a = 20 是可以的，因为这是给相同的变量赋予一个新的值。

如果你在定义变量 a 之前使用它，则会得到编译错误 undefined: a。如果你声明了一个局部变量却没有在相同的代码块中使用它，同样会得到编译错误，例如下面这个例子当中的变量 a：

```go
func main() {
   var name string = "golang"
   fmt.Println("hello, golang")
}
```

尝试编译这段代码将得到错误 a declared and not used
单纯地给 a 赋值也是不够的，这个值必须被使用，所以使用在同一个作用域中，已存在同名的变量，则之后的声明初始化，则退化为赋值操作。但这个前提是，最少要有一个新的变量被定义，且在同一作用域，例如，下面的y就是新定义的变量

```go
package main

import (
    "fmt"
)

func main() {
    x := 140
    fmt.Println(&x)
    x, y := 200, "abc"
    fmt.Println(&x, x)
    fmt.Print(y)
}
```

# 匿名变量

在使用多重赋值时候，如果不需要在左值中接收变量，可以使用匿名变量 _, python中也经常有这种用法

```go
for data, _ in range list {
}

// python 中
data = [2,4,1,6]
for _, item in enumerate(data):
    print(item)

```

# 总结

变量的声明：

1. 变量命名以英文，数字，下划线组成；
2. 只能以英文，下划线开头，不能以数字开头；
3. 不能使用Go关键字，比如func, package 等；
4. 不能使用Go预定义关键字，比如。true,false；
5. 建议驼峰命名；
6. 区分大小写；